"use strict";var onLandingView,menuBtn,menuUl,menuUlTop,btnTop,onLandingPage=document.querySelector("#landing");function debounce(o){var c,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:15,a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return function(){var e=this,t=arguments,n=a&&!c;clearTimeout(c),c=setTimeout(function(){c=null,a||o.apply(e,t)},i),n&&o.apply(e,t)}}function handleMenuClick(e){var t=document.querySelector("html"),n=document.querySelector("body"),o=document.querySelector("#main"),c=document.querySelector("#menu"),i=e.currentTarget.attributes["aria-expanded"],a="true"==i.value;i.value=a?"false":"true",c.classList.toggle("active"),t.classList.toggle("active"),n.classList.toggle("active"),o.classList.toggle("active"),setMenuBackColor(c)}function setButtonDisplay(){btnTop=menuBtn.getBoundingClientRect().top+window.scrollY,onLandingView=btnTop<window.innerHeight,onLandingPage&&onLandingView?menuBtn.classList.add("fade"):menuBtn.classList.remove("fade")}function setMenuListDisplay(){menuUlTop=menuUl.getBoundingClientRect().top+window.scrollY,onLandingView=menuUlTop<window.innerHeight,onLandingPage&&onLandingView&&1200<window.innerWidth?menuUl.classList.remove("active"):menuUl.classList.add("active")}function setMenuListActive(){var e=document.querySelector("#main").dataset.location;switch(e){case"index":case"work":case"experiments":case"about":case"work--detail":t(e)}function t(t){document.querySelectorAll("#menu ul a").forEach(function(e){t.includes(e.dataset.location)&&e.classList.add("active")})}}function setButtonColor(){var e=document.querySelectorAll("[data-color]");if(1<e.length)findCurrentSectionColor(e);else{var t=document.querySelector("[data-color]").dataset.color;document.querySelectorAll(".icon-bar").forEach(function(e){return e.style.backgroundColor="".concat(t)})}}function findCurrentSectionColor(e){e.forEach(function(e){var t=.8*window.innerHeight,n=e.getBoundingClientRect().top,o=e.getBoundingClientRect().bottom,c=e.dataset.color,i=document.querySelectorAll(".icon-bar");(0<n&&n<t||0<o&&o<t||n<0&&t<o)&&i.forEach(function(e){return e.style.backgroundColor="".concat(c)})})}function setMenuBackColor(e){var t=document.querySelector(".icon-bar").style.backgroundColor.match(/\d{1,3}/g),n=t[0],o=t[1],c=t[2];e.style.backgroundColor="rgba(".concat(n,",").concat(o,",").concat(c,",0.65)")}function copyToClipBoard(){var e=document.querySelector(".aboutEmail").dataset.user,t=document.querySelector(".aboutEmail").dataset.website,n=document.querySelector(".emailAlert"),o=document.createElement("textarea");o.style.position="fixed",o.style.top=0,o.style.left=0,o.style.width="2em",o.style.height="2em",o.style.padding=0,o.style.border="none",o.style.outline="none",o.style.boxShadow="none",o.style.background="transparent",o.value="".concat(e.split("").reverse().join(""),"@").concat(t.split("").reverse().join("")),document.body.appendChild(o),o.focus(),o.select();try{document.execCommand("copy");n.classList.add("active"),n.addEventListener("transitionend",function(){setTimeout(function(){return n.classList.remove("active")},1500)})}catch(e){alert("Sorry, seems I can't copy the address...")}document.body.removeChild(o)}document.addEventListener("DOMContentLoaded",function(e){fetch("./../components/menu.html").then(function(e){return e.text()}).then(function(e){$("#main").before(e)}),fetch("./../components/menuBtn.html").then(function(e){return e.text()}).then(function(e){$("#main").after(e),menuBtn=document.querySelector("#menuBtn"),menuUl=document.querySelector("#menu ul"),setButtonDisplay(),setButtonColor(),setMenuListDisplay(),setMenuListActive(),menuBtn.addEventListener("click",handleMenuClick),document.addEventListener("scroll",debounce(setMenuListDisplay)),document.addEventListener("scroll",debounce(setButtonDisplay)),document.addEventListener("scroll",debounce(setButtonColor))}).catch(function(){return console.log("loadBth().error")})}),onLandingPage&&$("a[href=#featuredWork]")[0].addEventListener("click",function(){$("html, body").animate({scrollTop:$("#featuredWork").offset().top+.05*window.innerHeight},800)}),window.addEventListener("touchstart",function(){document.addEventListener("scroll",debounce(function(){var n=.15*window.innerHeight,o=.85*window.innerHeight;document.querySelectorAll("a.work--image").forEach(function(e){var t=e.getBoundingClientRect().top+e.offsetHeight/2;n<t&&t<o?e.classList.add("active"):e.classList.remove("active")})}))});